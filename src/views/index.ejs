<!DOCTYPE html>
<html lang="pt-BR">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0"/>

    <!-- Usa sempre "title" vindo do app.js -->
    <title><%= title || 'Receita Tech' %></title>

    <link
      href="https://fonts.googleapis.com/css2?family=Montserrat:wght@400;600;700&display=swap"
      rel="stylesheet"
    />
    <link
      href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css"
      rel="stylesheet"
    >

    <link rel="stylesheet" href="/css/home.css" />
    <link rel="stylesheet" href="/css/navbar.css">
    <link rel="stylesheet" href="/css/footer.css">
  </head>
  <body>
    <header class="navbar">
      <div class="container">
        <a href="/">
          <img src="/assets/logo-branca.png" alt="Logo Receita Tech" class="logo" />
        </a>

        <div class="user-wrapper">
          <div class="user-icon">
            <!-- JS decide se vai pra /login ou /perfil -->
            <a href="#" id="user-link">
              <img src="/assets/icon-perfil.png" alt="Usuário" class="perfil-navbar" />
            </a>
          </div>
        </div>

        <div class="search-container">
          <div class="dropdown categorias-dropdown">
            <button
              class="dropdown-toggle"
              type="button"
              id="dropdownMenu2"
              data-bs-toggle="dropdown"
              aria-expanded="false"
            >
              Categorias
            </button>
            <ul class="dropdown-menu" aria-labelledby="dropdownMenu2">
              <% (categorias || []).forEach(function(c){ %>
                <li>
                  <button
                    class="dropdown-item"
                    type="button"
                    data-categoria="<%= c %>"
                  >
                    <%= c %>
                  </button>
                </li>
              <% }); %>
            </ul>
          </div>

          <input
            type="text"
            id="campo-pesquisa"
            placeholder="Pesquise a sua receita..."
          />
        </div>
      </div>
    </header>

    <main>
      <!-- GRID DE RECEITAS -->
      <section class="receitas-grid">
        <% (receitas || []).forEach(function(r){ %>
          <a
            class="receita-card"
            href="/receita/<%= r.id %>"
            data-categoria="<%= r.categoria || '' %>"
          >
            <img
              src="<%= r.imagem %>"
              alt="<%= r.titulo %>"
              class="receita-imagem"
            />
            <div class="receita-info">
              <h3><%= r.titulo %></h3>
              <div class="tempo">
                <img src="/assets/icon-tempo.png" alt="Relógio" />
                <span><%= r.tempo %></span>
              </div>
            </div>
          </a>
        <% }); %>
      </section>

      <!-- CATEGORIAS EM BOLINHAS -->
      <section class="categorias-container">
        <%
          var catImg = {
            'Sobremesas': 'categoria-sobremesa.png',
            'Almoço': 'categoria-almoco.png',
            'Fitness': 'categoria-fit.png',
            'Lanches': 'categoria-lanche.png'
          };
        %>
        <% (categorias || []).forEach(function(c){ %>
          <div class="categoria bolinha-categoria" data-categoria="<%= c %>">
            <button class="btn-categoria">
              <img
                src="/assets/<%= catImg[c] || 'categoria-lanche.png' %>"
                alt="<%= c %>"
              />
              <p><%= c %></p>
            </button>
          </div>
        <% }); %>
      </section>
    </main>

    <footer class="footer">
      <p>&copy; 2025 Receita Tech. Todos os direitos reservados.</p>
    </footer>

    <script src="/js/index.js"></script>
    <script src="/js/categorias.js"></script>
    <script src="/js/auth.js"></script>
    <script src="/js/navbar.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
  </body>
</html>
